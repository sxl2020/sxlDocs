---
title: Web容器是什么？
date: 2020-03-29 19:02:34
tags:
---

### Web应用启动、访问的原理

Web应用程序是如何运行的呢？

Web应用程序是在Web服务器的Web容器内运行。

由此有以下疑问：

### 1. 什么是Web容器？

Web服务器的出现的标志着WWW时代的带来，世界变得更加平面化。当初尝到甜头的开创者们开始不满足与在互联网上获取静态资源，于是出现了CGI脚本来动态获取资源。再后来网络发展方向也是朝着增强Web服务器动态获取资源的能力前进。以下是代表性的动态技术：

| 技术名词                                      | 特点                                                         |
| :-------------------------------------------- | :----------------------------------------------------------- |
| CGI（Common Gateway Interface，公用网关接口） | 以独立进程运行，可以用多种语言开发，比如C,C++,VB,Perl，灵活但效率低，维护复杂 |
| PHP                                           | 服务器端嵌入HTML脚本，开源，功能强大，扩展性较差             |
| JSP                                           | 服务器端嵌入HTML脚本，跨平台，部署前需编译，主要缺点是编写JSP比较复杂，需熟悉JAVA及相关技术 |
| ASP                                           | 服务器端嵌入HTML脚本，开发简单，功能强大，只能在windows下运行 |

随后Web服务器朝着企业级应用方向发展，快速的业务变化，迫使Web开发人员面对新的挑战：如何快速写出鲁棒，可靠，符合业务需求的程序并顺利部署？解决这个挑战的一个有效的办法是，**创造一个Web程序开发框架**（含运行环境，比如解释执行JSP,Web API），这个框架解决鲁棒性，可靠性问题，提供快速开发接口。换言之，开发人员只需要专注于实现业务本身，如有更高的需求还可以对框架进行定制和扩展。这个框架的另外一个名字是**Web应用程序容器。**

### 2. Web容器的基本工作原理

相对于Web服务器，容器新增或强化了以下模块：

- **分配线程池资源**

  容器为每个请求分配一个线程进行处理，通常采取线程池的方式高效理由CPU算资源。

- **封装Request上下文**

  一个请求对应一个Request上下文，它主要封装了用户请求的主要构成：URL,HTTP请求头，以及基于请求头构建的Session,Cookie等对象，方便编程使用。

- **封装Response上下文**

  一个请求对应一个Response上下文，主要用于向用户代理返回资源。可以在其中写入输出流，或者重定向，或者返回错误码等等。

- **URL路由**

  在容器里，运行开发人员设置不同的路由匹配规则，比如让.HTM返回.HTML,也可以自定义.xyz返回.HTML资源。更加灵活的配置可以参考JAVA MVC或者ASP.NET MVC的配置方案。

- **动态资源处理模块**

  通常在这里具体的容器和开发语言都有自己的高效开发模型，比如JAVA的Servlet,ASP

- **回收资源**

  这里会回收刚才的线程资源，为了线程复用，除非服务器空闲一般会将线程返回线程池。

  可以看出,Web容器本身具备了做为一个Web服务器的功能,事实上**通常实现Web容器功能的服务器就是一个Web服务器**.比如Tomcat , IIS ,Jetty。

