## 前言

在JavaWeb的开发中，常常会涉及要对请求的重定向和转发。比如用户的自动登录场景。程序若发现用户未登录，则需要将跳转到登录页面。实现页面跳转的方式主要有两种：请求和重定向。

### 1.请求的转发

RequestDispatcher接口可以实现请求的转发。 实现请求转发功能的主要步骤如下：

1. 调用**HttpServletRequest**的getRequestDispatcher()方法获取RequestDispatcher对象。
2. 调用RequestDispatcher对象的getRequestDispatcher()方法，输入要转发的地址。
3. 调用HttpServletRequest的forward(request,response)进行请求的转发。

相关代码如下所示：

```java
public class ForwardServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	System.out.println("ForwardServlet's doGet");
	
	request.setAttribute("name", "abcde");
	System.out.println("ForwardServlet's name: " + request.getAttribute("name"));
	
	//请求的转发.
	//1. 调用 HttpServletRequest 的 getRequestDispatcher() 方法获取  RequestDispatcher 对象
	//调用 getRequestDispatcher() 需要传入要转发的地址
	String path = "testServlet";
	RequestDispatcher requestDispatcher = request.getRequestDispatcher("/" + path);
	
	//2. 调用 HttpServletRequest 的 forward(request, response) 进行请求的转发. 
	requestDispatcher.forward(request, response); 
 }
}
```



### 2. 请求的重定向 

使用HttpServletResponse对象的sendRedirect()方法，可以实现对请求的重定向。实现方法如下：

- 直接调用response.sendRedirect(path)方法，其中，path为重定向的地址。

相关代码如下所示：



```java
public class RedirectServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	System.out.println("RedirectServlet's doGet");
	
	request.setAttribute("name", "xyzmn");
	System.out.println("RedirectServlet's name: " + request.getAttribute("name"));
	
	//执行请求的重定向, 直接调用 response.sendRedirect(path) 方法,
	//path 为要重定向的地址
	String path = "testServlet";
	response.sendRedirect(path);
	}
}
```



### 3. 两者区别

**请求转发只发出了一次请求，请求重定向则发出了两次请求**